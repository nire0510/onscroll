!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.orchestrator=e():t.orchestrator=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(1),s=o(r),a={mode:"scroll",active:!1,_scroll:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},_position:[-1,-1],_collection:[],_init:function(){this._run=this._run.bind(this)},_start:function(){switch(this.mode){case"scroll":window.addEventListener("scroll",this._run);break;case"requestAnimationFrame":this._scroll.call(window,this._run)}"complete"!==document.readyState?window.addEventListener("load",function(){window.scrollTo(window.scrollX,window.scrollX)}):window.scrollTo(window.scrollX,window.scrollX),this.active=!0},_stop:function(){"scroll"===this.mode&&window.removeEventListener("scroll",this._run),this.active=!1},_update:function(){0===this._collection.length||this._collection.every(function(t){return!t.enabled})?this.active&&this._stop():!this.active&&this._start()},_run:function(){var t=this;return this._position[0]===window.pageXOffset&&this._position[1]===window.pageYOffset?("requestAnimationFrame"===this.mode&&this._scroll.call(window,this._run),!1):(this._position=[window.pageXOffset,window.pageYOffset],this._collection.forEach(function(e){return e.run(t._position[0],t._position[1])}),void("requestAnimationFrame"===this.mode&&this._scroll.call(window,this._run)))},add:function(t,e){if("object"!==("undefined"==typeof t?"undefined":i(t))&&"object"!==("undefined"==typeof e?"undefined":i(e)))return console.warn("Orchestrator: wrong number or type of arguments"),!1;e?this.remove(t):(e=t,t=null);var n=new s.default(t,e);return n.valid?(this._collection.push(n),this._update(),n.id):void 0},remove:function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return 0===n.length?(this._collection.length=0,this._update(),!0):void n.forEach(function(e){var n=t._collection.findIndex(function(t){return t.id===e});n&&(t._collection.splice(n,1),t._update())})},disable:function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];this._collection.filter(function(t){return n.includes(t.id)||0===n.length}).forEach(function(e){e.disable(),t._update()})},enable:function(){for(var t=this,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];this._collection.filter(function(t){return n.includes(t.id)||0===n.length}).forEach(function(e){e.enable(),t._update()})}};a._init(),e.default=a},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function(){function t(e,n){o(this,t),this.id=e||btoa((new Date).valueOf().toString()),this.enabled=!1,this.valid=!1,this.element=null,this.extractOptions(n)}return r(t,[{key:"disable",value:function(){this.enabled=!1}},{key:"enable",value:function(){this.enabled=!0}},{key:"extractOptions",value:function(t){var e=this;t.selector&&t.timeline&&"object"===i(t.timeline)?(this.selector=t.selector,this.element=document.querySelectorAll(t.selector),this.timeline=t.timeline,this.style=[],this.timeline.forEach(function(t){if(t.actions&&"object"===i(t.actions)&&(t.top&&(isFinite(t.top)||Array.isArray(t.top)&&t.top.every(function(t){return isFinite(t)}))||t.left&&(isFinite(t.left)||Array.isArray(t.left)&&t.left.every(function(t){return isFinite(t)})))){t.top=Array.isArray(t.top)?t.top:[t.top,null],t.left=Array.isArray(t.left)?t.left:[t.left,null];for(var n in t.actions){if(t.actions.hasOwnProperty(n))switch(n){case"addClass":"string"==typeof t.actions[n]||Array.isArray(t.actions[n])?"string"==typeof t.actions[n]&&(t.actions.addClass=[t.actions[n]]):(delete t.actions[n],console.warn("Action "+n+" of directive "+e.id+" is not valid"));break;case"removeClass":"string"==typeof t.actions[n]||Array.isArray(t.actions[n])?"string"==typeof t.actions[n]&&(t.actions.removeClass=[t.actions[n]]):(delete t.actions[n],console.warn("Action "+n+" of directive "+e.id+" is not valid"));break;case"setStyle":"object"===i(t.actions[n])&&0!==Object.keys(t.actions[n]).length||(delete t.actions[n],console.warn("Action "+n+" of directive "+e.id+" is not valid")),e.getCurrentStyle(t);break;case"callFunction":"function"!=typeof t.method&&(delete t.actions[n],console.warn("Action "+n+" of directive "+e.id+" is not valid"))}Object.keys(t.actions).length>0?(e.enabled=!0,e.valid=!0):console.warn("Directive "+e.id+" has no valid actions")}}})):console.warn("Directive "+this.id+" is not valid")}},{key:"getCurrentStyle",value:function(t){var e=this;this.element&&this.element.length>0&&[].concat(n(this.element)).forEach(function(n,o){var i=window.getComputedStyle(n),r=e.style&&e.style.length>o&&e.style[o]||{};Object.keys(t.actions.setStyle).forEach(function(t){r[t]=i.getPropertyValue(t)}),e.style.push(r)})}},{key:"run",value:function(t,e){var o=this,i=!1;this.enabled&&this.valid&&(this.element&&0!==this.element.length||(this.element=document.querySelectorAll(this.selector),i=!0),this.element&&this.element.length>0&&this.timeline.forEach(function(r){if(e>=r.top[0]&&(e<=r.top[1]||!r.top[1])||t>=r.left[0]&&(t<=r.left[1]||!r.left[1])){var s=function(s){if(r.actions.hasOwnProperty(s))switch(s){case"addClass":case"removeClass":[].concat(n(o.element)).forEach(function(t){r.actions[s].forEach(function(e){"addClass"===s?t.classList.add(e):t.classList.remove(e)})});break;case"setStyle":i&&(o.getCurrentStyle(r),i=!1);var a=function(i){r.actions[s].hasOwnProperty(i)&&[].concat(n(o.element)).forEach(function(n){n.style[i]="function"==typeof r.actions[s][i]?r.actions[s][i](t,e):r.actions[s][i]})};for(var c in r.actions[s])a(c);break;case"callFunction":r.actions[s](t,e)}};for(var a in r.actions)s(a)}else{var c=function(t){if(r.actions.hasOwnProperty(t))switch(t){case"addClass":case"removeClass":[].concat(n(o.element)).forEach(function(e){r.actions[t].forEach(function(n){"addClass"===t?e.classList.remove(n):e.classList.add(n)})});break;case"setStyle":var e=function(e){r.actions[t].hasOwnProperty(e)&&[].concat(n(o.element)).forEach(function(t,n){t.style[e]=o.style[n][e]})};for(var i in r.actions[t])e(i)}};for(var a in r.actions)c(a)}}))}}]),t}();e.default=s}])});
//# sourceMappingURL=orchestrator.min.js.map
