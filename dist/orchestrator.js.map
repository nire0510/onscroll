{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2f5d84e7d597794d335d","webpack:///./src/orchestrator.js","webpack:///./src/directive.js"],"names":["orchestrator","mode","active","_scroll","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","_position","_collection","_init","_run","bind","_start","addEventListener","call","document","readyState","scrollTo","scrollX","_stop","removeEventListener","_update","length","every","directive","enabled","pageXOffset","pageYOffset","forEach","p","run","add","id","options","console","warn","remove","valid","push","ids","index","findIndex","splice","disable","filter","includes","enable","Directive","btoa","Date","valueOf","toString","element","extractOptions","selector","timeline","querySelectorAll","style","scene","actions","top","isFinite","Array","isArray","n","left","action","hasOwnProperty","addClass","removeClass","Object","keys","getCurrentStyle","method","getComputedStyle","current","setStyle","prop","getPropertyValue","shouldGetStyle","classList","className","property"],"mappings":"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","file":"orchestrator.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"orchestrator\"] = factory();\n\telse\n\t\troot[\"orchestrator\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2f5d84e7d597794d335d\n **/","import Directive from './directive';\n\nconst orchestrator = {\n  /**\n   * Current\n   */\n  mode: 'scroll', // 'requestAnimationFrame' / 'scroll'\n\n  /**\n   * Indicates if orchestrator is currently active\n   * @type {boolean}\n   */\n  active: false,\n\n  /**\n   * Scroll callback function\n   * @type {function}\n   * @private\n   */\n  _scroll: window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    function (callback) { window.setTimeout(callback, 1000/60) },\n\n  /**\n   * Current H&V scrolls position\n   * @type [{number}, {number}]\n   * @private\n   */\n  _position: [-1, -1],\n\n  /**\n   * Directives collection\n   * @type [{Directive}]\n   * @private\n   */\n  _collection: [],\n\n  /**\n   * Object initialization\n   * @private\n   */\n  _init() {\n    this._run = this._run.bind(this);\n    // this._collection = new Proxy(this._data, {\n    //   deleteProperty: (target, property) => {\n    //     delete target[property];\n    //     if (target.length === 0) {\n    //       this._stop();\n    //     }\n    //     return true;\n    //   },\n    //   set: (target, property, value, receiver) => {\n    //     target[property] = value;\n    //     if (target.length > 0) {\n    //       this._start();\n    //     }\n    //     return true;\n    //   }\n    // });\n  },\n\n  /**\n   * Starts to track scrolls and call directives\n   * @private\n   */\n  _start() {\n    // add event listener:\n    switch (this.mode) {\n      case 'scroll':\n        window.addEventListener('scroll', this._run);\n        break;\n      case 'requestAnimationFrame':\n        this._scroll.call(window, this._run);\n        break;\n    }\n    // trigger scroll event to apply directives for current positions:\n    if (document.readyState !== 'complete') {\n      window.addEventListener('load', function () {\n        window.scrollTo(window.scrollX, window.scrollX);\n      });\n    }\n    else {\n      window.scrollTo(window.scrollX, window.scrollX);\n    }\n    // set active:\n    this.active = true;\n  },\n\n  /**\n   * Stops to track scrolls and call directives\n   * @private\n   */\n  _stop() {\n    // remove event listener:\n    if (this.mode === 'scroll') {\n      window.removeEventListener('scroll', this._run);\n    }\n    // set inactive:\n    this.active = false;\n  },\n\n  /**\n   * Starts or stops orchestrator depends on how many directives are active\n   * @private\n   */\n  _update() {\n    // stop if there are no directives or all of them are disabled:\n    if (this._collection.length === 0 || this._collection.every(directive => !directive.enabled)) {\n      this.active && this._stop();\n    }\n    else {\n      !this.active && this._start();\n    }\n  },\n\n  /**\n   *\n   * @private\n   */\n  _run: function () {\n    // position hasn't changed (optimization):\n    if (this._position[0] === window.pageXOffset && this._position[1] === window.pageYOffset) {\n      // re-run:\n      if (this.mode === 'requestAnimationFrame') {\n        this._scroll.call(window, this._run);\n      }\n      return false;\n    }\n\n    this._position = [window.pageXOffset, window.pageYOffset];\n    this._collection.forEach(p => p.run(this._position[0], this._position[1]));\n\n    // re-run:\n    if (this.mode === 'requestAnimationFrame') {\n      this._scroll.call(window, this._run);\n    }\n  },\n\n  /**\n   * Adds a new directive to collection\n   * @param {string} [id] Directive unique ID\n   * @param {object} options Directive options\n   * @return {string} Directive ID if valid, undefined otherwise\n   */\n  add(id, options) {\n    // validate arguments:\n    if (!(typeof id === 'object' || typeof options === 'object')) {\n      console.warn('Orchestrator: wrong number or type of arguments');\n      return false;\n    }\n    // generate directive id if it's empty and move current id content to options:\n    else if (!options) {\n      options = id;\n      id = null;\n    }\n    else {\n      this.remove(id);\n    }\n\n    // create directive\n    let directive = new Directive(id, options);\n    // add it to collection, upte status and return its id:\n    if (directive.valid) {\n      this._collection.push(directive);\n      this._update();\n      return directive.id;\n    }\n  },\n\n  /**\n   * Removes an existing directive or many directives from collection\n   * @param {string} ids One or more directive unique ID to delete.\n   * Leave blank to delete all directives.\n   */\n  remove(...ids) {\n    // delete all & update status:\n    if (ids.length === 0) {\n      this._collection.length = 0;\n      this._update();\n      return true;\n    }\n\n    // delete some by id & update status:\n    ids.forEach(id => {\n      let index = this._collection.findIndex(p => p.id === id);\n      if (index) {\n        this._collection.splice(index, 1);\n        this._update();\n      }\n    });\n  },\n\n  /**\n   * Disables a directive or many directives\n   * @param {string} [ids] One or more directive unique ID to disable.\n   * Leave blank to disable all directives.\n   */\n  disable(...ids) {\n    this._collection\n      .filter(p => ids.includes(p.id) || ids.length === 0)\n      .forEach(p => {\n        p.disable();\n        this._update();\n      });\n  },\n\n  /**\n   * Enables a directive or many directives\n   * @param {string} [ids] One or more directive unique ID to enable.\n   * Leave blank to enable all directives.\n   */\n  enable(...ids) {\n    this._collection\n      .filter(p => ids.includes(p.id) || ids.length === 0)\n      .forEach(p => {\n        p.enable();\n        this._update();\n      });\n  }\n};\n\norchestrator._init();\n\n// export default orchestrator:\nexport default orchestrator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/orchestrator.js\n **/","/**\n * Created by nirelbaz on 21/12/2016.\n */\nclass Directive {\n  constructor(id, options) {\n    this.id = id || btoa(new Date().valueOf().toString());\n    this.enabled = false;\n    this.valid = false;\n    this.element = null;\n\n    this.extractOptions(options)\n  }\n\n  /**\n   * Disables directive\n   */\n  disable() {\n    this.enabled = false;\n  }\n\n  /**\n   * Enables directive\n   */\n  enable() {\n    this.enabled = true;\n  }\n\n  /**\n   * Extracts & validates options\n   * @param {object} options Directive options\n   */\n  extractOptions(options) {\n    // check for common options:\n    if (options.selector && options.timeline && typeof options.timeline === 'object') {\n      this.selector = options.selector;\n      this.element = document.querySelectorAll(options.selector);\n      this.timeline = options.timeline;\n      this.style = [];\n\n      // validate and format timeline array:\n      this.timeline.forEach(scene => {\n        if (scene.actions && typeof scene.actions === 'object' &&\n          (scene.top && (isFinite(scene.top) || (Array.isArray(scene.top) && scene.top.every(n => isFinite(n)))) ||\n          (scene.left && (isFinite(scene.left) || (Array.isArray(scene.left) && scene.left.every(n => isFinite(n))))))) {\n          scene.top = Array.isArray(scene.top) ? scene.top : [scene.top, null];\n          scene.left = Array.isArray(scene.left) ? scene.left : [scene.left, null];\n\n          // now check actions object:\n          for (let action in scene.actions) {\n            if (scene.actions.hasOwnProperty(action)) {\n              switch (action) {\n                case 'addClass':\n                  if (typeof scene.actions[action] === 'string' || Array.isArray(scene.actions[action])) {\n                    if (typeof scene.actions[action] === 'string') {\n                      scene.actions.addClass = [scene.actions[action]];\n                    }\n                  }\n                  else {\n                    delete scene.actions[action];\n                    console.warn(`Action ${action} of directive ${this.id} is not valid`);\n                  }\n                  break;\n                case 'removeClass':\n                  if (typeof scene.actions[action] === 'string' || Array.isArray(scene.actions[action])) {\n                    if (typeof scene.actions[action] === 'string') {\n                      scene.actions.removeClass = [scene.actions[action]];\n                    }\n                  }\n                  else {\n                    delete scene.actions[action];\n                    console.warn(`Action ${action} of directive ${this.id} is not valid`);\n                  }\n                  break;\n                case 'setStyle':\n                  if (typeof scene.actions[action] !== 'object' || Object.keys(scene.actions[action]).length === 0) {\n                    delete scene.actions[action];\n                    console.warn(`Action ${action} of directive ${this.id} is not valid`);\n                  }\n\n                  // store current style:\n                  this.getCurrentStyle(scene);\n                  break;\n                case 'callFunction':\n                  if (typeof scene.method !== 'function') {\n                    delete scene.actions[action];\n                    console.warn(`Action ${action} of directive ${this.id} is not valid`);\n                  }\n                  break;\n              }\n            }\n\n            if (Object.keys(scene.actions).length > 0) {\n              this.enabled = true;\n              this.valid = true;\n            }\n            else {\n              console.warn(`Directive ${this.id} has no valid actions`);\n            }\n          }\n        }\n      });\n    }\n    else {\n      console.warn(`Directive ${this.id} is not valid`);\n    }\n  }\n\n  /**\n   * Stores element's current style for reset when scroll not in range\n   * @param {object} scene Timeline scene\n   */\n  getCurrentStyle(scene) {\n    if (this.element && this.element.length > 0) {\n      [...this.element].forEach((element, index) => {\n        let style = window.getComputedStyle(element),\n          current = this.style && this.style.length > index && this.style[index] || {};\n\n        Object.keys(scene.actions.setStyle).forEach(prop => {\n          current[prop] = style.getPropertyValue(prop);\n        });\n        this.style.push(current);\n      });\n    }\n  }\n\n  run(left, top) {\n    let shouldGetStyle = false;\n\n    // continue only if directive is enabled & valid:\n    if (this.enabled && this.valid) {\n      // if element is empty, find and cache it:\n      if (!this.element || this.element.length === 0) {\n        this.element = document.querySelectorAll(this.selector);\n        shouldGetStyle = true;\n      }\n      // verify there's such element:\n      if (this.element && this.element.length > 0) {\n        this.timeline.forEach(scene => {\n          // directive is in range:\n          if ((top >= scene.top[0] && (top <= scene.top[1] || !scene.top[1])) ||\n            (left >= scene.left[0] && (left <= scene.left[1] || !scene.left[1]))) {\n            for (let action in scene.actions) {\n              if (scene.actions.hasOwnProperty(action)) {\n                switch (action) {\n                  case 'addClass':\n                  case 'removeClass':\n                    [...this.element].forEach(element => {\n                      scene.actions[action].forEach(className => {\n                        if (action === 'addClass') {\n                          element.classList.add(className);\n                        }\n                        else {\n                          element.classList.remove(className);\n                        }\n                      });\n                    });\n                    break;\n                  case 'setStyle':\n                    if (shouldGetStyle) {\n                      // store current style:\n                      this.getCurrentStyle(scene);\n                      shouldGetStyle = false;\n                    }\n                    for (let property in scene.actions[action]) {\n                      if (scene.actions[action].hasOwnProperty(property)) {\n                        [...this.element].forEach(element => {\n                          element.style[property] = typeof scene.actions[action][property] === 'function' ?\n                            scene.actions[action][property](left, top) :\n                            scene.actions[action][property];\n                        });\n                      }\n                    }\n                    break;\n                  case 'callFunction':\n                    scene.actions[action](left, top);\n                    break;\n                }\n              }\n            }\n          }\n          // directive is out of range:\n          else {\n            for (let action in scene.actions) {\n              if (scene.actions.hasOwnProperty(action)) {\n                switch (action) {\n                  case 'addClass':\n                  case 'removeClass':\n                    [...this.element].forEach(element => {\n                      scene.actions[action].forEach(className => {\n                        if (action === 'addClass') {\n                          element.classList.remove(className);\n                        }\n                        else {\n                          element.classList.add(className);\n                        }\n                      });\n                    });\n                    break;\n                  case 'setStyle':\n                    for (let property in scene.actions[action]) {\n                      if (scene.actions[action].hasOwnProperty(property)) {\n                        [...this.element].forEach((element, index) => {\n                          element.style[property] = this.style[index][property];\n                        });\n                      }\n                    }\n                    break;\n                }\n              }\n            }\n          }\n        });\n      }\n    }\n  }\n}\n\nexport default Directive;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/directive.js\n **/"],"sourceRoot":""}